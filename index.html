<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecureText Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-500 overflow-hidden">

    <div id="app" class="min-h-screen flex flex-col items-center justify-center p-4">
        <div id="auth-screen" class="w-full max-w-md fade-in">
            <div class="glass-effect rounded-xl p-8 shadow-2xl">
                <h1 class="text-3xl font-bold text-center mb-2">SecureText <span class="text-blue-500">Pro</span></h1>
                <p class="text-center text-gray-500 dark:text-gray-400 mb-6">Your private space on the web.</p>
                
                <div id="site-login-view">
                    <div class="space-y-4">
                        <input type="text" id="site-name" placeholder="Enter your site name" class="w-full px-4 py-3 bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition">
                        <input type="password" id="password" placeholder="Enter your password" class="w-full px-4 py-3 bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition">
                    </div>
                    <button id="access-button" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg mt-6 transition-transform transform hover:scale-105 flex items-center justify-center"> Access or Create Site </button>
                    <p class="text-center mt-4"><a href="#" id="show-passkey-login" class="text-blue-500 hover:underline text-sm">Login with a Pass Key</a></p>
                </div>

                <div id="passkey-login-view" class="hidden">
                    <input type="text" id="passkey-input" placeholder="Enter Pass Key" class="w-full px-4 py-3 bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition">
                    <button id="passkey-login-button" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg mt-6 transition-transform transform hover:scale-105 flex items-center justify-center"> Login with Pass Key </button>
                    <p class="text-center mt-4"><a href="#" id="show-site-login" class="text-blue-500 hover:underline text-sm">Login with Site Name</a></p>
                </div>
                
                <p id="auth-status" class="text-center text-sm text-red-500 mt-4 h-4"></p>
            </div>
        </div>

        <div id="main-screen" class="hidden w-full h-screen flex">
            <aside id="sidebar" class="w-64 bg-white/5 dark:bg-gray-800/50 p-4 flex flex-col slide-in-left transition-all duration-300">
                <h1 class="text-2xl font-bold mb-6">SecureText <span class="text-blue-500">Pro</span></h1>
                <button id="new-note-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg mb-4 flex items-center justify-center space-x-2"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg> <span>New Note</span> </button>
                <button id="generate-passkey-btn" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg mb-4 flex items-center justify-center space-x-2"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"></path></svg> <span>Generate Pass Key</span> </button>
                <nav id="notes-list" class="flex-grow overflow-y-auto"></nav>
                <button id="logout-button" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg mt-4">Logout</button>
            </aside>
            
            <div class="flex-1 flex flex-col p-4">
                <header class="flex items-center justify-between mb-4">
                    <h2 id="current-note-title" class="text-2xl font-semibold"></h2>
                    <div class="flex items-center space-x-3">
                        <button id="export-md-btn" title="Export as Markdown" class="p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 transition"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg> </button>
                        <button id="export-pdf-btn" title="Export as PDF" class="p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 transition"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><path d="M10.29 13.41a2.43 2.43 0 0 1 0-3.41 2.43 2.43 0 0 1 3.42 0c.9.9.95 2.48.1 3.46L10 17H8v-2l2.29-2.59z"></path></svg> </button>
                        <button id="read-mode-toggle" title="Toggle Read Mode" class="p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 transition"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg></button>
                        <button id="theme-toggle" title="Toggle Theme" class="p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 transition"><svg id="theme-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button>
                    </div>
                </header>
                <main id="editor-wrapper" class="flex-grow bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-colors">
                    <div id="editor-container"></div>
                </main>
                <div id="read-mode-view" class="hidden flex-grow bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-y-auto p-8 prose dark:prose-invert max-w-none"></div>
                <footer class="text-center text-sm text-gray-500 dark:text-gray-400 pt-4">
                    <span id="status-indicator" class="mr-4"></span>
                    <span id="word-count">Words: 0</span> | <span id="char-count">Characters: 0</span>
                </footer>
            </div>
        </div>

        <div id="new-note-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 modal-overlay">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md modal-content">
                <h3 class="text-xl font-semibold mb-4">Create New Note</h3>
                <input type="text" id="new-note-title-input" placeholder="Enter note title..." class="w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                <div class="flex justify-end space-x-3 mt-6">
                    <button id="cancel-new-note" class="px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500">Cancel</button>
                    <button id="confirm-new-note" class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700">Create</button>
                </div>
            </div>
        </div>

        <div id="passkey-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 modal-overlay">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md modal-content">
                <h3 class="text-xl font-semibold mb-2">Temporary Pass Key Generated</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-4">Share this key to grant temporary read-only access for 2 hours.</p>
                <div class="bg-gray-100 dark:bg-gray-900 rounded-lg p-4 flex items-center justify-between">
                    <code id="passkey-display" class="text-green-600 dark:text-green-400 font-mono"></code>
                    <button id="copy-passkey-btn" class="p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700"> <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> </button>
                </div>
                <p class="text-xs text-center mt-4 text-gray-500 dark:text-gray-400">Expires at: <span id="passkey-expiry-display"></span></p>
                <div class="flex justify-end mt-6">
                    <button id="close-passkey-modal" class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700">Done</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://unpkg.com/turndown/dist/turndown.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <script type="module" src="script.js"></script>
</body>
<footer class="fixed bottom-2 right-2 bg-gray-900 text-white text-sm px-3 py-1 rounded z-50">
  © 2025 SecureText Pro. All rights reserved.
</footer>
</html>
